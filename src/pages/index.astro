---
import { Markdown } from 'astro/components'
import Main from '../layouts/Main.astro'
import Header from '../components/Header.astro'

// interface MarkdownFrontmatter {}

const allPosts = await Astro.fetchContent('./*.md')
const allPostsSorted = allPosts.sort((a, b) => new Date(b.date).valueOf() - new Date(a.date).valueOf())
const tagPosts = allPosts.reduce((acc, el) => {
  el.tags.forEach(t => {
    if (!acc[t]) acc[t] = []
    acc[t].push(el)
  })
  return acc
}, {})

// Full Astro Component Syntax:
// https://docs.astro.build/core-concepts/astro-components/
---

<Main content={{ title: 'kuworking' }}>
  <Header />

  <Markdown>
    # kuworking

    Mi evolución: [Gatsby](https://www.gatsbyjs.com/) | [WordPress](https://developer.wordpress.org/) -> [11ty](https://www.11ty.dev/) -> [Astro](https://docs.astro.build/)
  </Markdown>

  <div class="tags">
    <div class="tag">Tools</div>
    <ul class="posts">
      <li><a class="link" href="/resources">Enlaces útiles</a></li>
      <li><a class="link" href="/css-gradients">Generador de gradientes</a></li>
      <li><a class="link" href="/font-inspiration">Explorador de fuentes google</a></li>
    </ul>

    {Object.entries(tagPosts).map(([k, v]) => (
      <div>
        <div id={k} class="tag">
          {k}
        </div>
        <ul class="posts">
          {v.map(p => (
            <li>
              <a class="link" href={p.url}>
                {p.title.replaceAll('#', '')}
              </a>
            </li>
          ))}
        </ul>
      </div>
    ))}
  </div>
</Main>

<style>
  .tags {
    margin-bottom: 100px;
  }
  .tag {
    margin: 50px 0px 0px 0px;
    font-weight: 700;
    text-transform: uppercase;
  }

  .link {
    color: var(--color_text);
  }
  .link:hover {
    color: #f00;
  }

  h1 {
    margin-top: 50px;
  }
  ul {
    margin-top: 10px;
  }
  li {
    margin-top: 0px;
  }
</style>
